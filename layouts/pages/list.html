{{ define "main" }}
  {{- partial "header/hero.html"
        (dict
          "title" .Title
          "image" .Params.image
          "context" .
        ) -}}
  {{- $category := site.GetPage (printf "/categories%s" .Params.category) -}}
  <div class="container">
    <div class="content">

      {{ partial "pages/aside.html"
          (dict
              "category" $category
              "context" .
          )
      }}

      <div>
        {{ partial "pages/image.html" .Params.image }}

        <div itemprop="articleBody" id="page-informations">
          {{
            partial "PrepareHTML" (
              partial "H2AddId" .Content
            )
          }}

          {{ if .Pages }}
            <section>
              <div class="top">
                <h2 id="page-children">{{ i18n "pages.details" }}</h2>
              </div>
              <div class="pages">
                {{ range sort .Pages ".Params.position"  }}
                  <div>
                    {{ partial "pages/page.html" . }}
                  </div>
                {{ end }}
              </div>
            </section>
          {{ end }}
        </div>

        {{ range .Params.blocks }}
          {{ $template := printf "blocks/%s.html" .template }}
          {{ partial $template .data }}
        {{ end }}

        {{ partial "posts/related.html" $category }}
      </div>
    </div>
  </div>
{{ end }}
