{{ define "main" }}
  {{- partial "header/hero.html"
        (dict
          "title" .Title
          "image" .Params.image
          "context" .
        ) -}}
<article itemscope itemtype="https://schema.org/PublicationVolume">
  <meta itemprop="name" content="{{ .Title }}">
  {{- $image := partial "GetMedia" .Params.Image -}}
  {{- if $image -}}
    {{- $url := $image.url -}}
    <meta itemprop="image" content="{{ $url }}">
  {{- end -}}

  <div class="container">
    <div class="row">
      <div class="col-md-4 col-lg-3 mb-2">
        {{- if .Params.image -}}
          {{- partial "commons/image.html"
                (dict
                  "image"    .Params.image
                  "alt"      .Title
                  "mobile"   "327x388"
                  "tablet"   "208x247"
                  "desktop"  "300x356"
                  "class"    "img-fluid"
                ) -}}
        {{- end -}}
      </div>
      <div class="col-md-5">
        <div itemprop="description">
          {{ safeHTML (partial "CorrectPunctuation" .Content) }}
        </div>
      </div>
      <div class="col-md-3 offset-lg-1">
        <dl>
          {{ if .Params.keywords }}
            <dt>Keywords</dt>
            <dd itemprop="keywords">{{ delimit .Params.Keywords " " }}</dd>
          {{ end }}

          {{ if .Params.date }}
            <dt>Date</dt>
            <dd><time itemprop="datePublished" datetime="{{ .Date.Format "2006-01-02T15:04" }}">{{ .Date.Format "January 2, 2006" }}</time></dd>
          {{ end }}
        </dl>
      </div>
    </div>

    <div class="row">
        <div class="col-md-8">
          <h2>Table</h2>
          <ol class="list-unstyled">
            {{ range $index, $s := .Pages }}
              {{ $modalId := "modalID_temp" }}
              <li class="row flex-md-row-reverse mt-4" itemprop="hasPart" itemscope itemtype="https://schema.org/ScholarlyArticle">
                <div class="col-md-4 text-md-end">
                  <small class="text-uppercase" itemprop="articleSection">Article</small>
                </div>
                <div class="col-md-8">
                  <h3><a href="{{ .Permalink }}" itemprop="name">{{ safeHTML (partial "CorrectPunctuation" .Title) }}</a></h3>
                  <p>
                    {{ range .Params.Researchers }}
                      {{ $author := site.GetPage (printf "/persons/%s" .) }}
                      <span itemprop="author" itemscope itemtype="https://schema.org/Person">
                        <a href="{{ $author.Permalink }}" itemprop="url">
                          <span itemprop="name">{{ trim $author.Title "\n" }}</span>
                        </a>
                      </span>
                    {{ end }}
                  </p>
                  <div class="d-grid gap-2 d-lg-block">
                    <a class="btn btn-secondary me-lg-1" href="{{ .Permalink }}" itemprop="url">Read</a>
                    <button type="button" class="btn btn--eye btn-secondary me-lg-1" data-bs-toggle="modal" data-bs-target="#{{ $modalId }}">Abstract</button>
                    <a href="{{ .Params.pdf }}" class="btn btn--download btn-secondary" download>PDF</a>
                  </div>
                  {{ partial "volumes/modal.html" (dict "modalId" $modalId) }}
                </div>
              </li>
            {{ end }}
          </ol>
        </div>
    </div>

  </div>
</article>

{{ end }}
